/* global angular *//* https://github.com/robjames/rjPreference */angular.module("rjPreference",[]).service("rjStore",function(){return localStorage?{save:function(t,n){typeof n=="object"&&(n=JSON.stringify(n));localStorage.setItem(t,n);return this},get:function(t){var n=localStorage.getItem(t);if(n===null)return n;if(n[0]==="{"||n[0]==="[")n=JSON.parse(n);return n},remove:function(t){localStorage.removeItem(t);return this}}:!1}).directive("rjPreference",["rjStore",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,r,i){if(!e)return;if(!i)return;var s=r.rjPreference,o=e.get(s);r.type&&r.type.toLowerCase()==="checkbox"?i.$render=function(){i.$viewValue=i.$viewValue==="false"?!1:i.$viewValue==="true"?!0:i.$viewValue;n[0].checked=i.$viewValue}:r.type&&r.type.toLowerCase()==="radio"?i.$render=function(){var e=r.value;n[0].checked=e==i.$viewValue}:i.$render=function(){n.val(i.$isEmpty(i.$viewValue)?"":i.$viewValue)};if(!!o){i.$setViewValue(o);i.$render()}i.$viewChangeListeners.push(function(){e.save(s,i.$modelValue)})}}}]);